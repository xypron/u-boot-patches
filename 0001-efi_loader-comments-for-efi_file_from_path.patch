From 1d97d0fa236c296b15ebe948d700f74c249823bc Mon Sep 17 00:00:00 2001
From: Heinrich Schuchardt <xypron.glpk@gmx.de>
Date: Mon, 4 Feb 2019 21:24:35 +0100
Subject: [PATCH 1/1] efi_loader: comments for efi_file_from_path()

Add more comments for efi_file_from_path().

Signed-off-by: Heinrich Schuchardt <xypron.glpk@gmx.de>
---
 lib/efi_loader/efi_file.c | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/lib/efi_loader/efi_file.c b/lib/efi_loader/efi_file.c
index 9d709a8db0..1341f1b456 100644
--- a/lib/efi_loader/efi_file.c
+++ b/lib/efi_loader/efi_file.c
@@ -637,6 +637,12 @@ static const struct efi_file_handle efi_file_handle_protocol = {
 	.flush = efi_file_flush,
 };
 
+/**
+ * efi_file_from_path() - open file via device path
+ *
+ * @fp:		device path
+ * @return:	EFI_FILE_PROTOCOL for the file or NULL
+ */
 struct efi_file_handle *efi_file_from_path(struct efi_device_path *fp)
 {
 	struct efi_simple_file_system_protocol *v;
@@ -651,10 +657,14 @@ struct efi_file_handle *efi_file_from_path(struct efi_device_path *fp)
 	if (ret != EFI_SUCCESS)
 		return NULL;
 
-	/* skip over device-path nodes before the file path: */
+	/* Skip over device-path nodes before the file path. */
 	while (fp && !EFI_DP_TYPE(fp, MEDIA_DEVICE, FILE_PATH))
 		fp = efi_dp_next(fp);
 
+	/*
+	 * Step through the nodes of the directory path until the actual file
+	 * node is reached which is the final node in the device path.
+	 */
 	while (fp) {
 		struct efi_device_path_file_path *fdp =
 			container_of(fp, struct efi_device_path_file_path, dp);
-- 
2.20.1

