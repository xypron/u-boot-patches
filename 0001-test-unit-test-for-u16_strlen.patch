From 1f3574850fe230bc91729e63348de2b064b59420 Mon Sep 17 00:00:00 2001
From: Heinrich Schuchardt <xypron.glpk@gmx.de>
Date: Sun, 14 Jul 2019 17:47:46 +0200
Subject: [PATCH 1/1] test: unit test for u16_strlen()

Provide a unit test for u16_strlen().

Signed-off-by: Heinrich Schuchardt <xypron.glpk@gmx.de>
---
 test/unicode_ut.c | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/test/unicode_ut.c b/test/unicode_ut.c
index 8e1efe6f69..1ccd36e7c9 100644
--- a/test/unicode_ut.c
+++ b/test/unicode_ut.c
@@ -50,6 +50,16 @@ static const char j1[] = {0x6a, 0x31, 0xa1, 0x6c, 0x00};
 static const char j2[] = {0x6a, 0x32, 0xc3, 0xc3, 0x6c, 0x00};
 static const char j3[] = {0x6a, 0x33, 0xf0, 0x90, 0xf0, 0x00};
 
+static int unicode_test_u16_strlen(struct unit_test_state *uts)
+{
+	ut_asserteq(6, u16_strlen(c1));
+	ut_asserteq(8, u16_strlen(c2));
+	ut_asserteq(3, u16_strlen(c3));
+	ut_asserteq(6, u16_strlen(c4));
+	return 0;
+}
+UNICODE_TEST(unicode_test_u16_strlen);
+
 static int unicode_test_u16_strdup(struct unit_test_state *uts)
 {
 	u16 *copy = u16_strdup(c4);
-- 
2.22.0

