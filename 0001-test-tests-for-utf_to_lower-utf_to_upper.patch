From 8780e0d8501d243844a4216481294cf30ad78b7f Mon Sep 17 00:00:00 2001
From: Heinrich Schuchardt <xypron.glpk@gmx.de>
Date: Mon, 16 Jul 2018 07:36:14 +0200
Subject: [PATCH 1/1] test: tests for utf_to_lower() utf_to_upper().

Provide unit tests for utf_to_lower() utf_to_upper().

Signed-off-by: Heinrich Schuchardt <xypron.glpk@gmx.de>
---
 test/unicode_ut.c | 38 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 38 insertions(+)

diff --git a/test/unicode_ut.c b/test/unicode_ut.c
index 89ad503e35..a32e72ff08 100644
--- a/test/unicode_ut.c
+++ b/test/unicode_ut.c
@@ -362,6 +362,42 @@ int ut_utf16_utf8_strncpy(void)
 	return 0;
 }
 
+int ut_utf_to_lower(void)
+{
+	if (utf_to_lower('@') != '@')
+		return 1;
+	if (utf_to_lower('A') != 'a')
+		return 1;
+	if (utf_to_lower('Z') != 'z')
+		return 1;
+	if (utf_to_lower('[') != '[')
+		return 1;
+	if (utf_to_lower('m') != 'm')
+		return 1;
+	/* Cyrillic letter I*/
+	if (utf_to_lower(0x0418) != 0x0438)
+		return 0;
+	return 0;
+}
+
+int ut_utf_to_upper(void)
+{
+	if (utf_to_upper('M') != 'M')
+		return 1;
+	if (utf_to_lower('`') != '`')
+		return 1;
+	if (utf_to_upper('a') != 'A')
+		return 1;
+	if (utf_to_upper('z') != 'Z')
+		return 1;
+	if (utf_to_upper('{') != '{')
+		return 1;
+	/* Cyrillic letter I */
+	if (utf_to_upper(0x0438) != 0x0418)
+		return 1;
+	return 0;
+}
+
 int do_ut_unicode(cmd_tbl_t *cmdtp, int flag, int argc, char * const argv[])
 {
 	int ret = 0;
@@ -378,6 +414,8 @@ int do_ut_unicode(cmd_tbl_t *cmdtp, int flag, int argc, char * const argv[])
 	ret |= ut_utf16_utf8_strnlen();
 	ret |= ut_utf16_utf8_strcpy();
 	ret |= ut_utf16_utf8_strncpy();
+	ret |= ut_utf_to_lower();
+	ret |= ut_utf_to_upper();
 
 	printf("Test %s\n", ret ? "failed" : "passed");
 
-- 
2.18.0

